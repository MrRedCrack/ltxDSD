\documentclass[12pt,a4paper]{article}
\usepackage[base]{babel} % language
\usepackage{subfiles}
\usepackage{booktabs} % Table rules (\toprule \midrule \bottomrule)
\usepackage{amsmath}
\usepackage[left=1.5in,right=1in,top=1in,bottom=1in]{geometry} % Set margin
\usepackage{setspace} % Set line spacing
\onehalfspacing{}
\usepackage{graphicx}
\usepackage{nicematrix} % table coloring (NiceTabular)
\usepackage{enumitem} % footnotes with NiceTabular
\graphicspath{ {./fig/} }
\usepackage{titlesec} % \titleformat and \titlespacing
\usepackage[skip=8pt]{parskip} % Set paragraph spacing and indent
\usepackage{newtxtext,newtxmath} % Times Roman txt & math
\usepackage[none]{hyphenat} % Paired with \sloppy and [none] for justify
\usepackage{float} % Precise image location [H]
% \counterwithout{section}{chapter} % Remove 0. (chapter number) from section numbering
\counterwithin{figure}{section} % Set section-based counting
\counterwithin{table}{section}
% \makeatletter
% \renewcommand\@seccntformat[1]{} % Use after table of contents to remove section numbering
% \makeatother
\usepackage[style=ieee,backend=biber,urldate=long]{biblatex}
\usepackage{xpatch} % Patch website no date entry
\xpatchbibdriver{online}
{\printtext[parens]{\usebibmacro{date}}}
{\iffieldundef{year}
{}
{\printtext[parens]{\usebibmacro{date}}}}
{}
{\typeout{There was an error patching biblatex-ieee (specifically, ieee.bbx's @online driver)}}
\addbibresource{ref/library.bib}
\usepackage{siunitx} % insert SI \unit
\usepackage{longtable} % extend table across pages
\usepackage[title,header,titletoc]{appendix}
\usepackage{pdfpages}
\usepackage[breaklinks=true]{hyperref} % Link wrapping
\usepackage[en-GB]{datetime2}
\DTMlangsetup{showdayofmonth=false}
\usepackage{makecell} % Force line break in table cell
\usepackage[printonlyused,withpage]{acronym}
\usepackage{circuitikz}
\usetikzlibrary{automata,positioning,matrix,shapes,arrows.meta}
\usepackage{rotating} % \rotatebox
\usepackage{fontspec-luatex}
\setmonofont[StylisticSet={1,3},Ligatures=TeXOff]{inconsolata} % code font
\usepackage{xcolor} % colored box
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{} % clear all header fields
\renewcommand{\headrulewidth}{0pt} % no line in header area
\fancyfoot{} % clear all footer fields
\fancyfoot[R]{\thepage}           % page number in "outer" position of footer line
\fancyfoot[L]{\footnotesize{}Bachelor of Information Technology (Honours) Computer Engineering\\Faculty of Information and Communication Technology (Kampar Campus), UTAR}
\usepackage{lipsum}
\usepackage{comment}
\usepackage{tocloft} % toc etc. title format
\newlistof{listing}{lol}{LIST OF SOURCE CODES}
\usepackage[newfloat=true,outputdir=latexmk_aux]{minted} % supports more code languages
\setminted[systemverilog]{
	frame=single,
	framesep=1mm,
	baselinestretch=1.2,
	fontsize=\normalsize}
\usemintedstyle{bw}
\usepackage[labelfont=bf,position=bottom,justification=centering]{caption} % Set caption options
\newenvironment{code}{\captionsetup{type=listing,skip=\abovecaptionskip}}{}
\SetupFloatingEnvironment{listing}{name=Source Code,fileext=lol}
\renewcommand\theFancyVerbLine{\footnotesize\arabic{FancyVerbLine}} % code line number formatting
\counterwithin{listing}{section}
\newcounter{cntA}
\newcommand\showcntA{\stepcounter{cntA}\thecntA}
\renewcommand{\cfttoctitlefont}{\hfill\Large\bfseries}
\renewcommand{\cftaftertoctitle}{\hfill}
\renewcommand{\cftlottitlefont}{\hfill\Large\bfseries}
\renewcommand{\cftafterlottitle}{\hfill}
\renewcommand{\cftloftitlefont}{\hfill\Large\bfseries}
\renewcommand{\cftafterloftitle}{\hfill}
\renewcommand{\cftloltitlefont}{\hfill\Large\bfseries}
\renewcommand{\cftafterloltitle}{\hfill}
\setlength{\cftfigindent}{0pt}
\setlength{\cfttabindent}{0pt}
\setlength{\cftfignumwidth}{4.5em}
\setlength{\cfttabnumwidth}{4.5em}
\setlength{\cftlistingnumwidth}{7.5em}
\renewcommand{\cftfigpresnum}{Figure~}
\renewcommand{\cfttabpresnum}{Table~}
\renewcommand{\cftlistingpresnum}{Source Code~}
\tocloftpagestyle{fancy}

\begin{document}
\pagenumbering{roman}
\begin{titlepage}
	\addcontentsline{toc}{section}{TITLE PAGE}
	\begin{center}
		\vspace*{1cm}%\huge
		\textbf{Dynamic Traffic Light Control System}\\
		By\\
		ToasterDesigns Group

		\bgroup{}
		\renewcommand{\arraystretch}{2}
		\begin{table}[ht]
			\setlength\tabcolsep{.5cm}
			\centering
			\begin{NiceTabular}[t]{llcl}[code-before = \rowcolor{white}{1} \rowcolors{2}{gray!12.5}{white}]
				\toprule
				No.         & \multicolumn{1}{c}{Name} & ID      & \multicolumn{1}{c}{Task} \\
				\midrule
				\showcntA{} & Chan Jian Hong           & 2104743 &                          \\
				\showcntA{} & Erin Tong Lih Xian       & 2206674 &                          \\
				\showcntA{} & Tam Kai Yuan             & 2103376 &                          \\
				\showcntA{} & Vanicha Kulma            & 2105652 &                          \\
				\bottomrule
			\end{NiceTabular}
		\end{table}
		\egroup{}
		in CT programme
		\vfill
		\includegraphics[width=0.4\textwidth]{UTAR.jpg}\\
		\vspace{0.2cm}
		Universiti Tunku Abdul Rahman\\
		Faculty of Information and Communication Technology\\ \setstretch{1}
		(Kampar Campus)\\ \setstretch{1.5}
		UCCE2023 Digital Systems Design\\
		Dr.\ Chang~Jing~Jing\\
		\DTMdisplaydate{2024}{4}{22}{-1}
	\end{center}
\end{titlepage}
\sloppy
\onehalfspacing{}
% \pagenumbering{roman}
\addtocounter{page}{1}
\renewcommand{\contentsname}{TABLE OF CONTENTS}
\phantomsection{}
\addcontentsline{toc}{section}{\contentsname}
\tableofcontents
\clearpage
\renewcommand{\listfigurename}{LIST OF FIGURES}
\phantomsection{}
\addcontentsline{toc}{section}{\listfigurename}
\listoffigures
\clearpage
\renewcommand{\listtablename}{LIST OF TABLES}
\phantomsection{}
\addcontentsline{toc}{section}{\listtablename}
\listoftables
\clearpage
\titleformat{\section}{\normalfont\Large\bfseries\centering}{\thesection}{1em}{}
\phantomsection{}
\addcontentsline{toc}{section}{LIST OF SOURCE CODES}
\listoflistings
\clearpage
\phantomsection{}
\addcontentsline{toc}{section}{LIST OF ABBREVIATIONS}
\section*{LIST OF ABBREVIATIONS}
\begin{acronym}[TLCS]\itemsep0pt
	\acro{fpga}[FPGA]{field-programmable gate array}
	\acro{fsm}[FSM]{finite state machine}
	\acro{hdl}[HDL]{hardware description language}
	\acro{io}[I/O]{input and output}
	\acro{rtl}[RTL]{register-transfer level}
	\acro{tlcs}[TLCS]{traffic light control system}
\end{acronym}

\clearpage
\fancyhead[L]{\footnotesize\textsl{\nouppercase\leftmark}}
\titleformat{\section}{\normalfont\Large\bfseries}{\thesection}{1em}{}
%\renewcommand{\sectionmark}[1]{\markboth{#1}{}}
\pagenumbering{arabic}
\onehalfspacing{}
\clearpage
\subfile{subfile/1intro.tex}
% \clearpage
\subfile{subfile/2systemDesign.tex}
\clearpage
\subfile{subfile/3specs.tex}
\clearpage
\subfile{subfile/4verification.tex}
\clearpage
\subfile{subfile/5simulation.tex}
\clearpage
\subfile{subfile/6discussion.tex}
\clearpage
\subfile{subfile/7conclusion.tex}

\clearpage
\pagenumbering{Roman}
\fancyhead{}
\fancyhead[L]{\footnotesize\textsl{\nouppercase\rightmark}}
\subfile{subfile/appendices.tex}
\clearpage
\fancyhead{}
\fancyhead[L]{\footnotesize\textsl{\nouppercase\leftmark}}
\begin{flushleft}
	\phantomsection{}
	\addcontentsline{toc}{section}{REFERENCES}
	\singlespacing{}
	\setlength{\bibitemsep}{\baselineskip}
	\titleformat{\section}{\normalfont\Large\bfseries\centering}{\thesection}{1em}{}
	\renewcommand{\refname}{REFERENCES}
	\printbibliography{}
\end{flushleft}

\end{document}
